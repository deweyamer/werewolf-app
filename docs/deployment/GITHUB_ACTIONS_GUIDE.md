# GitHub Actionsè‡ªåŠ¨éƒ¨ç½²æŒ‡å— ğŸ¤–

## ä»€ä¹ˆæ˜¯GitHub Actionsï¼Ÿ

GitHub Actionsæ˜¯GitHubæä¾›çš„**å…è´¹CI/CDæœåŠ¡**ï¼Œå¯ä»¥åœ¨ä½ æ¨é€ä»£ç åè‡ªåŠ¨ï¼š
- âœ… æ„å»ºé¡¹ç›®
- âœ… è¿è¡Œæµ‹è¯•
- âœ… è‡ªåŠ¨éƒ¨ç½²åˆ°Railway/Vercel
- âœ… å‘é€é€šçŸ¥

**å®Œå…¨å…è´¹ï¼æ¯æœˆ2000åˆ†é’Ÿè¿è¡Œæ—¶é—´ï¼**

---

## ä¸ºä»€ä¹ˆè¦ç”¨GitHub Actionsï¼Ÿ

### æ²¡æœ‰GitHub Actions
```
ä½ å†™ä»£ç  â†’ æ¨é€åˆ°GitHub â†’ æ‰‹åŠ¨å»Railwayéƒ¨ç½² â†’ æ‰‹åŠ¨å»Verceléƒ¨ç½²
```
**æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨æ“ä½œï¼Œå¾ˆéº»çƒ¦ï¼**

### æœ‰äº†GitHub Actions
```
ä½ å†™ä»£ç  â†’ æ¨é€åˆ°GitHub â†’ ğŸ¤–è‡ªåŠ¨éƒ¨ç½²å®Œæˆï¼
```
**å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œè§£æ”¾åŒæ‰‹ï¼**

---

## éƒ¨ç½²æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä½ çš„ç”µè„‘                          â”‚
â”‚  git push origin main                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GitHub                            â”‚
â”‚  - ä»£ç æ‰˜ç®¡                                          â”‚
â”‚  - GitHub Actionsè‡ªåŠ¨è§¦å‘                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
      â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Railway  â”‚  â”‚ Vercel   â”‚
â”‚ (åç«¯)   â”‚  â”‚ (å‰ç«¯)   â”‚
â”‚ è¿è¡Œä¸­âœ…  â”‚  â”‚ è¿è¡Œä¸­âœ…  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚             â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
             â–¼
        ğŸ® æ¸¸æˆä¸Šçº¿ï¼
```

---

## è®¾ç½®æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šè·å–éƒ¨ç½²Token

#### 1. Railway Token

1. è®¿é—®: https://railway.app/
2. ç™»å½•åç‚¹å‡»å³ä¸Šè§’å¤´åƒ
3. Account Settings â†’ Tokens
4. ç‚¹å‡» "Create Token"
5. è¾“å…¥åç§°: `github-actions`
6. å¤åˆ¶Tokenï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼ï¼‰

#### 2. Vercel Token

1. è®¿é—®: https://vercel.com/
2. ç™»å½•åç‚¹å‡»å³ä¸Šè§’å¤´åƒ
3. Settings â†’ Tokens
4. ç‚¹å‡» "Create"
5. Token Name: `github-actions`
6. Scope: Full Account
7. Expiration: No Expiration
8. å¤åˆ¶Token

#### 3. Vercel Project IDå’ŒOrg ID

åœ¨Vercelé¡¹ç›®é¡µé¢ï¼š
```bash
# å®‰è£…Vercel CLI
npm i -g vercel

# ç™»å½•
vercel login

# åœ¨é¡¹ç›®ç›®å½•ä¸­
cd client
vercel link

# ä¼šæ˜¾ç¤º:
# âœ…  Linked to your-name/werewolf-game
# å¹¶ç”Ÿæˆ .vercel/project.json
```

æ‰“å¼€ `.vercel/project.json`:
```json
{
  "projectId": "prj_xxxxxxxxxxxxx",  â† å¤åˆ¶è¿™ä¸ª
  "orgId": "team_xxxxxxxxxxxxx"      â† å¤åˆ¶è¿™ä¸ª
}
```

---

### ç¬¬äºŒæ­¥ï¼šåœ¨GitHubæ·»åŠ Secrets

1. æ‰“å¼€ä½ çš„GitHubä»“åº“
2. Settings â†’ Secrets and variables â†’ Actions
3. ç‚¹å‡» "New repository secret"
4. æ·»åŠ ä»¥ä¸‹secretsï¼š

| Name | Value | è¯´æ˜ |
|------|-------|------|
| `RAILWAY_TOKEN` | ä½ çš„Railway Token | Railwayéƒ¨ç½²ä»¤ç‰Œ |
| `VERCEL_TOKEN` | ä½ çš„Vercel Token | Verceléƒ¨ç½²ä»¤ç‰Œ |
| `VERCEL_ORG_ID` | team_xxxxx | Vercelç»„ç»‡ID |
| `VERCEL_PROJECT_ID` | prj_xxxxx | Vercelé¡¹ç›®ID |
| `VITE_API_URL` | https://your-backend.railway.app | åç«¯APIåœ°å€ |
| `BACKEND_URL` | https://your-backend.railway.app | ç”¨äºå¥åº·æ£€æŸ¥ |

---

### ç¬¬ä¸‰æ­¥ï¼šæ¨é€ä»£ç è§¦å‘éƒ¨ç½²

```bash
# 1. æäº¤ä½ çš„ä»£ç 
git add .
git commit -m "feat: æ·»åŠ GitHub Actionsè‡ªåŠ¨éƒ¨ç½²"

# 2. æ¨é€åˆ°mainåˆ†æ”¯
git push origin main

# 3. ğŸ¤– GitHub Actionsè‡ªåŠ¨å¼€å§‹å·¥ä½œï¼
```

---

## æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€

### åœ¨GitHubæŸ¥çœ‹

1. æ‰“å¼€ä½ çš„ä»“åº“
2. ç‚¹å‡» "Actions" æ ‡ç­¾
3. çœ‹åˆ°æ­£åœ¨è¿è¡Œçš„workflowï¼š

```
ğŸŸ¡ Deploy Werewolf Game (è¿è¡Œä¸­)
   â”œâ”€â”€ âœ… build-and-test (å®Œæˆ)
   â”œâ”€â”€ ğŸŸ¡ deploy-backend (è¿è¡Œä¸­)
   â””â”€â”€ â³ deploy-frontend (ç­‰å¾…ä¸­)
```

4. ç‚¹å‡»è¿›å…¥æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### éƒ¨ç½²æˆåŠŸ

```
âœ… Deploy Werewolf Game (3m 24s)
   â”œâ”€â”€ âœ… build-and-test (1m 12s)
   â”œâ”€â”€ âœ… deploy-backend (1m 30s)
   â”œâ”€â”€ âœ… deploy-frontend (0m 42s)
   â””â”€â”€ âœ… notify (0m 05s)

ğŸ‰ éƒ¨ç½²æˆåŠŸï¼
å‰ç«¯: https://your-app.vercel.app
åç«¯: https://your-backend.railway.app
```

---

## Workflowæ–‡ä»¶è¯´æ˜

æ–‡ä»¶ä½ç½®: `.github/workflows/deploy.yml`

### Workflowè§¦å‘æ¡ä»¶

```yaml
on:
  push:
    branches: [ main ]  # æ¨é€åˆ°mainåˆ†æ”¯æ—¶è§¦å‘
  pull_request:
    branches: [ main ]  # PRåˆ°mainåˆ†æ”¯æ—¶è§¦å‘ï¼ˆåªæ„å»ºä¸éƒ¨ç½²ï¼‰
```

### Jobæ‰§è¡Œé¡ºåº

```
build-and-test (æ„å»ºå’Œæµ‹è¯•)
    â†“
    â”œâ”€â†’ deploy-backend (éƒ¨ç½²åç«¯)
    â””â”€â†’ deploy-frontend (éƒ¨ç½²å‰ç«¯)
        â†“
    notify (å‘é€é€šçŸ¥)
```

### å…³é”®æ­¥éª¤è§£æ

#### 1. æ„å»ºå’Œæµ‹è¯•
```yaml
build-and-test:
  runs-on: ubuntu-latest  # ä½¿ç”¨Ubuntuç³»ç»Ÿ
  steps:
    - uses: actions/checkout@v3        # æ£€å‡ºä»£ç 
    - uses: actions/setup-node@v3      # å®‰è£…Node.js
    - run: npm ci                       # å®‰è£…ä¾èµ–
    - run: npm run build                # æ„å»º
```

#### 2. éƒ¨ç½²åç«¯
```yaml
deploy-backend:
  needs: build-and-test  # ç­‰å¾…æ„å»ºå®Œæˆ
  if: github.ref == 'refs/heads/main'  # åªåœ¨mainåˆ†æ”¯éƒ¨ç½²
```

#### 3. éƒ¨ç½²å‰ç«¯
```yaml
deploy-frontend:
  uses: amondnet/vercel-action@v20  # ä½¿ç”¨Vercel Action
```

---

## è‡ªå®šä¹‰é…ç½®

### åªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹éƒ¨ç½²

```yaml
# åªåœ¨åŒ…å«ç‰¹å®šæ ‡ç­¾çš„commitæ—¶éƒ¨ç½²
on:
  push:
    branches: [ main ]
    tags:
      - 'v*'  # åªåœ¨æ‰“tagæ—¶éƒ¨ç½²

# æˆ–è€…åªåœ¨ç‰¹å®šæ–‡ä»¶æ”¹å˜æ—¶è§¦å‘
on:
  push:
    paths:
      - 'server/**'
      - 'client/**'
```

### æ·»åŠ æµ‹è¯•æ­¥éª¤

```yaml
- name: è¿è¡Œæµ‹è¯•
  working-directory: ./server
  run: npm test

- name: ä»£ç è´¨é‡æ£€æŸ¥
  run: npm run lint
```

### æ·»åŠ é€šçŸ¥åˆ°Slack/Discord

```yaml
- name: å‘é€Slacké€šçŸ¥
  uses: 8398a7/action-slack@v3
  with:
    status: ${{ job.status }}
    webhook_url: ${{ secrets.SLACK_WEBHOOK }}
```

---

## æœ€ç®€å•çš„æ›¿ä»£æ–¹æ¡ˆï¼ˆä¸ç”¨GitHub Actionsï¼‰

å¦‚æœä½ è§‰å¾—GitHub Actionså¤ªå¤æ‚ï¼Œå¯ä»¥ç”¨**æ›´ç®€å•çš„æ–¹å¼**ï¼š

### Railwayè‡ªåŠ¨éƒ¨ç½²

Railwayå¯ä»¥ç›´æ¥è¿æ¥GitHubè‡ªåŠ¨éƒ¨ç½²ï¼š

1. Railwayé¡¹ç›® â†’ Settings
2. å¯ç”¨ "Auto Deploy from GitHub"
3. æ¯æ¬¡æ¨é€è‡ªåŠ¨éƒ¨ç½²ï¼

### Vercelè‡ªåŠ¨éƒ¨ç½²

Vercelé»˜è®¤å°±è‡ªåŠ¨éƒ¨ç½²ï¼š

1. è¿æ¥GitHubä»“åº“æ—¶
2. è‡ªåŠ¨å¯ç”¨ Git Integration
3. æ¯æ¬¡æ¨é€è‡ªåŠ¨éƒ¨ç½²ï¼

**è¿™æ ·å°±ä¸éœ€è¦GitHub Actionsäº†ï¼**

---

## ä¸‰ç§æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|-----|------|------|--------|
| **Railway + Vercelè‡ªåŠ¨éƒ¨ç½²** | æœ€ç®€å•ï¼Œ0é…ç½® | åŠŸèƒ½æœ‰é™ | â­â­â­â­â­ |
| **GitHub Actions** | å®Œå…¨å¯æ§ï¼Œå¯è‡ªå®šä¹‰ | éœ€è¦é…ç½®Token | â­â­â­â­ |
| **æ‰‹åŠ¨éƒ¨ç½²** | ä¸éœ€è¦è®¾ç½® | æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨æ“ä½œ | â­â­ |

---

## æ¨èæ–¹æ¡ˆ ğŸ¯

### æ–¹æ¡ˆAï¼šæœ€ç®€å•ï¼ˆæ¨èæ–°æ‰‹ï¼‰

1. Railway â†’ è¿æ¥GitHub â†’ å¯ç”¨è‡ªåŠ¨éƒ¨ç½²
2. Vercel â†’ è¿æ¥GitHub â†’ è‡ªåŠ¨éƒ¨ç½²
3. **å®Œæˆï¼ä¸éœ€è¦GitHub Actionsï¼**

### æ–¹æ¡ˆBï¼šè¿›é˜¶ï¼ˆæ¨èæœ‰ç»éªŒçš„ï¼‰

1. ä½¿ç”¨GitHub Actions
2. æ·»åŠ è‡ªåŠ¨æµ‹è¯•
3. æ·»åŠ ä»£ç æ£€æŸ¥
4. æ·»åŠ éƒ¨ç½²é€šçŸ¥
5. **å®Œæ•´çš„CI/CDæµç¨‹ï¼**

---

## å¸¸è§é—®é¢˜ â“

### Q1: GitHub Actionsç”¨å®Œå…è´¹é¢åº¦æ€ä¹ˆåŠï¼Ÿ

**A**: æ¯æœˆ2000åˆ†é’Ÿï¼ŒåŸºæœ¬ç”¨ä¸å®Œï¼ä¸€æ¬¡éƒ¨ç½²åªéœ€3-5åˆ†é’Ÿï¼Œå¯ä»¥éƒ¨ç½²400-600æ¬¡ï¼

### Q2: Railwayå’ŒVercelä¸æ”¯æŒè‡ªåŠ¨éƒ¨ç½²æ€ä¹ˆåŠï¼Ÿ

**A**: Railwayå’ŒVerceléƒ½é»˜è®¤æ”¯æŒï¼è¿æ¥GitHubåè‡ªåŠ¨å¯ç”¨ã€‚

### Q3: æ¯æ¬¡æ¨é€éƒ½ä¼šéƒ¨ç½²å—ï¼Ÿ

**A**:
- Railway/Vercelè‡ªåŠ¨éƒ¨ç½²ï¼šæ˜¯çš„
- GitHub Actionsï¼šå¯ä»¥é…ç½®æ¡ä»¶ï¼Œæ¯”å¦‚åªåœ¨æ‰“tagæ—¶éƒ¨ç½²

### Q4: å¯ä»¥éƒ¨ç½²åˆ°å…¶ä»–å¹³å°å—ï¼Ÿ

**A**: å¯ä»¥ï¼åªéœ€è¦ä¿®æ”¹workflowæ–‡ä»¶ï¼Œæ”¯æŒï¼š
- AWS
- Google Cloud
- Azure
- Heroku
- è‡ªå·±çš„æœåŠ¡å™¨

---

## ä¸‹ä¸€æ­¥ ğŸš€

### å¦‚æœé€‰æ‹©ç®€å•æ–¹æ¡ˆï¼ˆæ¨èï¼‰

1. æŒ‰ç…§ [DEPLOY_STEPS.md](./DEPLOY_STEPS.md) éƒ¨ç½²
2. Railwayå’ŒVercelä¼šè‡ªåŠ¨éƒ¨ç½²
3. **å®Œæˆï¼**

### å¦‚æœé€‰æ‹©GitHub Actions

1. æŒ‰ç…§æœ¬æ–‡æ¡£é…ç½®Secrets
2. æ¨é€ä»£ç åˆ°GitHub
3. æŸ¥çœ‹Actionsè¿è¡ŒçŠ¶æ€
4. **å®Œæˆï¼**

---

**ç°åœ¨ä½ æœ‰å®Œæ•´çš„è‡ªåŠ¨åŒ–éƒ¨ç½²æ–¹æ¡ˆäº†ï¼** ğŸ‰

æ¨èå…ˆç”¨**Railway + Vercelè‡ªåŠ¨éƒ¨ç½²**ï¼ˆæœ€ç®€å•ï¼‰ï¼Œç­‰ç†Ÿæ‚‰äº†å†æ·»åŠ GitHub Actionsåšæ›´å¤æ‚çš„CI/CDæµç¨‹ã€‚
