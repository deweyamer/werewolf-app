# ğŸº ç‹¼äººæ€ çº¿ä¸‹é¢æ€ç‰ˆ

åŸºäºReact + TypeScript + Socket.IOçš„å¤šäººåœ¨çº¿ç‹¼äººæ€æ¸¸æˆ

[![Deploy to Railway](https://railway.app/button.svg)](https://railway.app/)
[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/)

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### å¼€å‘ä¸ä½¿ç”¨
- ğŸš€ **[5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹](./docs/development/QUICK_START.md)** - æœ¬åœ°è¿è¡Œæ¸¸æˆ
- ğŸ“– **[å®Œæ•´ä½¿ç”¨æŒ‡å—](./docs/development/USER_GUIDE.md)** - è¯¦ç»†çš„æ¸¸æˆè¯´æ˜
- ğŸ”¥ **[çƒ­é‡è½½å¼€å‘æŒ‡å—](./docs/development/HOT_RELOAD.md)** - å¼€å‘ç¯å¢ƒé…ç½®

### éƒ¨ç½²æ–‡æ¡£
- ğŸ³ **[Dockeræœ¬åœ°éƒ¨ç½²](./docs/deployment/DOCKER_DEPLOYMENT.md)** - æ¨èï¼ä¸€é”®Dockeréƒ¨ç½²
- â˜ï¸ **[é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—](./docs/deployment/ALIYUN_FC_DEPLOYMENT.md)** - é˜¿é‡Œäº‘Serverlesséƒ¨ç½²
- âš¡ **[å¿«é€Ÿäº‘ç«¯éƒ¨ç½²](./docs/deployment/DEPLOY_STEPS.md)** - Vercel + Railway éƒ¨ç½²
- ğŸ“‹ **[å®Œæ•´éƒ¨ç½²æŒ‡å—](./docs/deployment/DEPLOYMENT_GUIDE.md)** - è¯¦ç»†çš„éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”
- ğŸ¤– **[GitHub Actions](./docs/deployment/GITHUB_ACTIONS_GUIDE.md)** - CI/CDè‡ªåŠ¨åŒ–æµç¨‹

### ä»£ç å®¡æŸ¥
- ğŸ” **[åç«¯å®¡æŸ¥æŠ¥å‘Š](./docs/review/BACKEND_REVIEW.md)** - åç«¯é€»è¾‘é—®é¢˜åˆ†æ
- ğŸ” **[å‰ç«¯å®¡æŸ¥æŠ¥å‘Š](./docs/review/FRONTEND_REVIEW.md)** - å‰ç«¯æ˜“ç”¨æ€§/ç®€æ´æ€§/åŠŸèƒ½å®Œå¤‡æ€§åˆ†æ

## é¡¹ç›®ç»“æ„

```
werewolf-app/
â”œâ”€â”€ client/          # Reactå‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/      # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/     # ZustandçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ services/   # WebSocketæœåŠ¡
â”‚   â”‚   â””â”€â”€ config.ts   # ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ dist/        # æ„å»ºäº§ç‰©
â”œâ”€â”€ server/          # Node.jsåç«¯æœåŠ¡
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ services/   # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ websocket/  # WebSocketå¤„ç†
â”‚   â”‚   â””â”€â”€ index.ts    # æœåŠ¡å…¥å£
â”‚   â””â”€â”€ data/        # æ•°æ®å­˜å‚¨
â”œâ”€â”€ shared/          # å‰åç«¯å…±äº«ä»£ç 
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ types.ts    # TypeScriptç±»å‹å®šä¹‰
â”‚       â””â”€â”€ constants.ts # å¸¸é‡å®šä¹‰
â”œâ”€â”€ docs/            # æ–‡æ¡£ç›®å½•
â””â”€â”€ README.md        # é¡¹ç›®è¯´æ˜
```

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… ç”¨æˆ·ç™»å½•ç³»ç»Ÿï¼ˆç®¡ç†å‘˜/ä¸Šå¸/ç©å®¶ä¸‰ç§è§’è‰²ï¼‰
- âœ… ç©å®¶è‡ªæ³¨å†ŒåŠŸèƒ½
- âœ… ç®¡ç†å‘˜æ§åˆ¶å°ï¼ˆç”¨æˆ·ç®¡ç†ã€å‰§æœ¬ç®¡ç†ï¼‰
- âœ… ä¸Šå¸æ§åˆ¶å°ï¼ˆåˆ›å»ºæˆ¿é—´ã€è§’è‰²åˆ†é…ã€æ¸¸æˆæµç¨‹æ§åˆ¶ï¼‰
- âœ… ç©å®¶è§†å›¾ï¼ˆåŠ å…¥æˆ¿é—´ã€æ¥æ”¶è§’è‰²ã€æ‰§è¡Œæ“ä½œï¼‰
- âœ… å®æ—¶WebSocketé€šä¿¡

### æ¸¸æˆåŠŸèƒ½
- âœ… æ‘„æ¢¦äºº12äººå‰§æœ¬ï¼ˆå™©æ¢¦ä¹‹å½±+æ‘„æ¢¦äºº+å¥³å·«+é¢„è¨€å®¶+çŒäººï¼‰
- âœ… éšæœºè§’è‰²åˆ†é…åŠŸèƒ½
- âœ… è­¦é•¿ç«é€‰ç³»ç»Ÿ
- âœ… å®Œæ•´çš„å¤œé—´/ç™½å¤©æµç¨‹
- âœ… æ¸¸æˆå†å²è®°å½•ï¼ˆæ”¯æŒå›æ”¾ï¼‰
- âœ… è‡ªåŠ¨èƒœè´Ÿåˆ¤å®š

### æµ‹è¯•åŠŸèƒ½
- âœ… è‡ªåŠ¨åˆ›å»º12ä¸ªæµ‹è¯•è´¦å·ï¼ˆtest1-test12ï¼‰
- âœ… é»˜è®¤ä¸Šå¸è´¦å·ï¼ˆgod/godï¼‰
- âœ… é»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼ˆadmin/admin123ï¼‰

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- React 18
- TypeScript
- Vite
- Tailwind CSS
- Zustand (çŠ¶æ€ç®¡ç†)
- Socket.IO Client

### åç«¯
- Node.js
- Express
- Socket.IO
- TypeScript
- JSONæ–‡ä»¶å­˜å‚¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1ï¼šDockeréƒ¨ç½²ï¼ˆæœ€ç®€å•ï¼‰â­æ¨è

**å‰æ**ï¼šå·²å®‰è£…Docker

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd werewolf-app

# 2. ä¸€é”®å¯åŠ¨
docker-compose up -d

# 3. è®¿é—®æ¸¸æˆ
# æµè§ˆå™¨æ‰“å¼€: http://localhost:3000
```

**å°±è¿™ä¹ˆç®€å•ï¼** è¯¦è§ [Dockeréƒ¨ç½²æ–‡æ¡£](./docs/deployment/DOCKER_DEPLOYMENT.md)

---

### æ–¹å¼2ï¼šæœ¬åœ°å¼€å‘ç¯å¢ƒ

**å‰æ**ï¼šå·²å®‰è£…Node.js 18+

#### 1. å®‰è£…ä¾èµ–

```bash
# å®‰è£…æ ¹ä¾èµ–
npm install

# å®‰è£…æ‰€æœ‰workspaceä¾èµ–
npm install --workspaces
```

#### 2. å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# åœ¨æ ¹ç›®å½•æ‰§è¡Œï¼ˆåŒæ—¶å¯åŠ¨å‰åç«¯ï¼‰
npm run dev
```

æˆ–è€…åˆ†åˆ«å¯åŠ¨ï¼š

```bash
# å¯åŠ¨åç«¯ (ç«¯å£ 3001)
cd server
npm run dev

# å¯åŠ¨å‰ç«¯ (ç«¯å£ 3000)
cd client
npm run dev
```

#### 3. è®¿é—®åº”ç”¨

- å‰ç«¯: http://localhost:3000
- åç«¯API: http://localhost:3001/api
- WebSocket: ws://localhost:3001

---

### é»˜è®¤è´¦å·

ç³»ç»Ÿå¯åŠ¨åä¼šè‡ªåŠ¨åˆ›å»ºä»¥ä¸‹è´¦å·ï¼š

| è§’è‰² | ç”¨æˆ·å | å¯†ç  | æ•°é‡ |
|-----|--------|------|------|
| ç®¡ç†å‘˜ | `admin` | `admin123` | 1ä¸ª |
| ä¸Šå¸ | `god` | `god` | 1ä¸ª |
| æµ‹è¯•ç©å®¶ | `test1` ~ `test12` | `test` | 12ä¸ª |

**ç©å®¶ä¹Ÿå¯ä»¥è‡ªè¡Œæ³¨å†Œ**ï¼šåœ¨ç™»å½•é¡µé¢ç‚¹å‡»"æ³¨å†Œ"æŒ‰é’®åˆ›å»ºæ–°è´¦å·

## ä½¿ç”¨æµç¨‹

### å¿«é€Ÿæµ‹è¯•ï¼ˆå•æœºæµ‹è¯•ï¼‰

1. **å¯åŠ¨æœåŠ¡**
   ```bash
   # ç»ˆç«¯1ï¼šå¯åŠ¨æœåŠ¡å™¨
   cd server && npm run dev

   # ç»ˆç«¯2ï¼šå¯åŠ¨å®¢æˆ·ç«¯
   cd client && npm run dev
   ```

2. **ä¸Šå¸åˆ›å»ºæˆ¿é—´**
   - æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:3000
   - ä½¿ç”¨ `god` / `god` ç™»å½•
   - é€‰æ‹©å‰§æœ¬ï¼Œç‚¹å‡»"åˆ›å»ºæˆ¿é—´"
   - è®°ä¸‹6ä½æˆ¿é—´ç 

3. **ç©å®¶åŠ å…¥æˆ¿é—´**
   - æ‰“å¼€12ä¸ªæµè§ˆå™¨æ ‡ç­¾é¡µ
   - ä¾æ¬¡ä½¿ç”¨ `test1` ~ `test12`ï¼ˆå¯†ç ï¼š`test`ï¼‰ç™»å½•
   - è¾“å…¥æˆ¿é—´ç åŠ å…¥æˆ¿é—´

4. **å¼€å§‹æ¸¸æˆ**
   - ä¸Šå¸ç‚¹å‡»"åˆ†é…è§’è‰²"
   - ç‚¹å‡»"ğŸ² éšæœºåˆ†é…"è‡ªåŠ¨åˆ†é…è§’è‰²
   - ç‚¹å‡»"ç¡®è®¤åˆ†é…"
   - ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"
   - æŒ‰ç…§é˜¶æ®µæ¨è¿›æ¸¸æˆ

### è¯¦ç»†ä½¿ç”¨æŒ‡å—

è¯·æŸ¥çœ‹ [USER_GUIDE.md](./docs/development/USER_GUIDE.md) è·å–å®Œæ•´çš„ä½¿ç”¨è¯´æ˜ã€è§’è‰²ä»‹ç»å’Œæ¸¸æˆæŠ€å·§ã€‚

## æ¸¸æˆæµç¨‹

### è§’è‰²é…ç½®ï¼ˆ12äººï¼‰
- ç‹¼äººé˜µè¥ï¼ˆ4äººï¼‰ï¼š1å™©æ¢¦ä¹‹å½± + 3æ™®é€šç‹¼äºº
- å¥½äººé˜µè¥ï¼ˆ8äººï¼‰ï¼š1æ‘„æ¢¦äºº + 1å¥³å·« + 1é¢„è¨€å®¶ + 1çŒäºº + 4å¹³æ°‘

### å¤œé—´é˜¶æ®µ
1. **ææƒ§é˜¶æ®µ**ï¼šå™©æ¢¦ä¹‹å½±ææƒ§ä¸€åç©å®¶
2. **å®ˆæŠ¤é˜¶æ®µ**ï¼šæ‘„æ¢¦äººå®ˆæŠ¤ä¸€åç©å®¶
3. **ç‹¼äººé˜¶æ®µ**ï¼šç‹¼äººæŠ•ç¥¨æ€äºº
4. **å¥³å·«é˜¶æ®µ**ï¼šå¥³å·«ä½¿ç”¨è§£è¯/æ¯’è¯
5. **é¢„è¨€å®¶é˜¶æ®µ**ï¼šé¢„è¨€å®¶æŸ¥éªŒèº«ä»½
6. **å¤œé—´ç»“ç®—**ï¼šå…¬å¸ƒæ­»äº¡ä¿¡æ¯

### ç™½å¤©é˜¶æ®µ
1. **è­¦é•¿ç«é€‰**ï¼šé¦–å¤œåè¿›è¡Œï¼ˆä»…ç¬¬ä¸€å¤©ï¼‰
2. **æŠ•ç¥¨æ”¾é€**ï¼šæŠ•ç¥¨æ”¾é€ä¸€åç©å®¶
3. **çŒäººå¼€æª**ï¼šçŒäººæ­»äº¡æ—¶å¯å¼€æª
4. **ç™½å¤©ç»“ç®—**ï¼šè¿›å…¥ä¸‹ä¸€è½®

### èƒœåˆ©æ¡ä»¶
- **ç‹¼äººèƒœåˆ©**ï¼šç‹¼äººæ•°é‡ >= å¥½äººæ•°é‡
- **å¥½äººèƒœåˆ©**ï¼šæ‰€æœ‰ç‹¼äººå‡ºå±€

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å‰§æœ¬

ç¼–è¾‘ `server/src/services/ScriptService.ts`ï¼Œåœ¨ `ensureDefaultScript()` æ–¹æ³•ä¸­æ·»åŠ æ–°çš„å‰§æœ¬é…ç½®ã€‚

### ä¿®æ”¹æ¸¸æˆé€»è¾‘

ä¸»è¦æ¸¸æˆé€»è¾‘åœ¨ `server/src/services/GameService.ts` ä¸­ï¼š
- `submitAction()`: å¤„ç†ç©å®¶æ“ä½œ
- `advancePhase()`: æ¨è¿›æ¸¸æˆé˜¶æ®µ
- `settleNight()`: å¤œé—´ç»“ç®—é€»è¾‘
- `checkWinner()`: åˆ¤æ–­èƒœè´Ÿ

### WebSocketæ¶ˆæ¯åè®®

æ‰€æœ‰æ¶ˆæ¯ç±»å‹å®šä¹‰åœ¨ `shared/src/types.ts`ï¼š
- `ClientMessage`: å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯
- `ServerMessage`: æœåŠ¡å™¨å‘é€çš„æ¶ˆæ¯

## æ•°æ®å­˜å‚¨

æ¸¸æˆæ•°æ®ä»¥JSONæ ¼å¼å­˜å‚¨åœ¨ `server/data/` ç›®å½•ï¼š
- `users.json`: ç”¨æˆ·æ•°æ®
- `scripts.json`: å‰§æœ¬æ•°æ®
- `games.json`: æ¸¸æˆæ•°æ®
- `sessions.json`: ä¼šè¯æ•°æ®

## æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# æ„å»ºæœåŠ¡å™¨
cd server
npm run build

# æ„å»ºå®¢æˆ·ç«¯
cd client
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
cd server
npm start
```

## æ³¨æ„äº‹é¡¹

1. é¦–å¤œå¥³å·«ä¸ä½¿ç”¨è§£è¯ï¼Œè¢«åˆ€è€…ä¼šæ­»äº¡
2. æ‘„æ¢¦äººå®ˆæŠ¤çš„ç©å®¶è¢«åˆ€ï¼Œæ‘„æ¢¦äººæ›¿æ­»
3. è­¦é•¿æ­»äº¡æ—¶å¯ä»¥ä¼ é€’è­¦å¾½æˆ–æ’•æ¯è­¦å¾½
4. çŒäººè¢«æ¯’æ­»ä¸èƒ½å¼€æª

## License

MIT
